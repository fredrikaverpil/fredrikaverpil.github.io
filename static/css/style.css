@font-face {
  font-family: 'Commit Mono';
  src: url('/fonts/CommitMono-Variable.woff2') format('woff2');
  font-weight: 100 900;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'Maple Mono';
  src: url('/fonts/MapleMono-Regular.woff2') format('woff2');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}
@font-face {
  font-family: 'Maple Mono';
  src: url('/fonts/MapleMono-Italic.woff2') format('woff2');
  font-weight: 400;
  font-style: italic;
  font-display: swap;
}
@font-face {
  font-family: 'Maple Mono';
  src: url('/fonts/MapleMono-Bold.woff2') format('woff2');
  font-weight: 700;
  font-style: normal;
  font-display: swap;
}

:root {
  /* Zenbones Light Palette (Default) */
  --bg: #F0EDEC;
  --fg: #2C363C;
  --fg-dim: #6F777B; /* Strings */
  --fg-muted: #859289; /* Comments */
  --link: #286486; /* Water */
  --meta-bg: #EAE6E4;
  --border: #C0BCBA;
  
  /* Callouts */
  --callout-bg: #EAE6E4;
  --note-border: #286486; --note-bg: #DFEBF1;
  --warn-border: #944927; --warn-bg: #F2E7E2;
  --tip-border: #4F894C; --tip-bg: #E4EFE3;
  --imp-border: #A8334C; --imp-bg: #F0E0E3;

  /* Syntax Highlighting */
  --syntax-k: #2C363C;
  --syntax-c: #859289;
  --syntax-s: #6F777B;
  --syntax-n: #2C363C;
  --syntax-bg: #F0EDEC;
}

/* Dark Mode Overrides (System Preference) */
@media (prefers-color-scheme: dark) {
  :root {
    --bg: #1C1917;
    --fg: #B4BDC3;
    --fg-dim: #8E969B;
    --fg-muted: #6C7377;
    --link: #6099C0;
    --meta-bg: #252220;
    --border: #353230;
    
    --callout-bg: #252220;
    --note-border: #6099C0; --note-bg: #1E2529;
    --warn-border: #B77E64; --warn-bg: #29221E;
    --tip-border: #819B69; --tip-bg: #21251E;
    --imp-border: #DE6E7C; --imp-bg: #291E1F;

    --syntax-k: #B4BDC3;
    --syntax-c: #6C7377;
    --syntax-s: #8E969B;
    --syntax-n: #B4BDC3;
    --syntax-bg: #1C1917;
  }
}

/* Dark Mode Overrides (Manual Toggle - overrides system light) */
body.dark {
  --bg: #1C1917;
  --fg: #B4BDC3;
  --fg-dim: #8E969B;
  --fg-muted: #6C7377;
  --link: #6099C0;
  --meta-bg: #252220;
  --border: #353230;
  
  --callout-bg: #252220;
  --note-border: #6099C0; --note-bg: #1E2529;
  --warn-border: #B77E64; --warn-bg: #29221E;
  --tip-border: #819B69; --tip-bg: #21251E;
  --imp-border: #DE6E7C; --imp-bg: #291E1F;

  --syntax-k: #B4BDC3;
  --syntax-c: #6C7377;
  --syntax-s: #8E969B;
  --syntax-n: #B4BDC3;
  --syntax-bg: #1C1917;
}

/* Light Mode Overrides (Manual Toggle - overrides system dark) */
body.light {
  --bg: #F0EDEC;
  --fg: #2C363C;
  --fg-dim: #6F777B;
  --fg-muted: #859289;
  --link: #286486;
  --meta-bg: #EAE6E4;
  --border: #C0BCBA;
  
  --callout-bg: #EAE6E4;
  --note-border: #286486; --note-bg: #DFEBF1;
  --warn-border: #944927; --warn-bg: #F2E7E2;
  --tip-border: #4F894C; --tip-bg: #E4EFE3;
  --imp-border: #A8334C; --imp-bg: #F0E0E3;

  --syntax-k: #2C363C;
  --syntax-c: #859289;
  --syntax-s: #6F777B;
  --syntax-n: #2C363C;
  --syntax-bg: #F0EDEC;
}

body {
  font-family: 'Commit Mono', monospace;
  font-weight: 400;
  max-width: 800px;
  margin: auto;
  padding: 1em;
  line-height: 1.5;
  background-color: var(--bg);
  color: var(--fg);
  transition: background-color 0.3s ease, color 0.3s ease; /* Smooth toggle */
}

a { color: var(--link); }

code, pre {
  font-family: 'Commit Mono', monospace;
  font-weight: 400;
}

h1, h2, h3, h4, h5, h6 {
  font-weight: 700;
}

/* header and footer areas */
.menu { padding: 0; }
.menu li { display: inline-block; }
.article-meta, .menu a {
  text-decoration: none;
  background: var(--meta-bg);
  color: var(--fg);
  padding: 5px;
  border-radius: 5px;
}
.menu, .article-meta, footer { text-align: center; }
.title { font-size: 1.1em; }
footer a { text-decoration: none; }
hr {
  border-style: dashed;
  color: var(--border);
}

/* code */
pre {
  border: 1px solid var(--border);
  box-shadow: 5px 5px 5px var(--meta-bg);
  padding: 1em;
  overflow-x: auto;
  background-color: var(--bg) !important;
}
code { background: var(--bg); }
pre code { background: none; }

/* misc elements */
img, iframe, video { max-width: 100%; }
main { hyphens: auto; }
blockquote {
  background: var(--meta-bg);
  border-left: 5px solid #944927; /* Wood default */
  padding: 3px 1em 3px;
}

table {
  margin: auto;
  border-top: 1px solid #666;
  border-bottom: 1px solid #666;
}
table thead th { border-bottom: 1px solid #ddd; }
th, td { padding: 5px; }
thead, tfoot, tr:nth-child(even) { background: var(--meta-bg); }

/* Callouts */
.callout {
  border-left: 4px solid #777;
  padding: 1em;
  margin: 1.5em 0;
  background: var(--callout-bg);
}
.callout-title {
  font-weight: bold;
  text-transform: uppercase;
  font-size: 0.85em;
  margin-bottom: 0.5em;
  font-family: 'Maple Mono', monospace;
}
.callout-content {
  font-family: 'Maple Mono', monospace;
  font-style: italic;
}
.callout-content code, .callout-content pre {
  font-family: 'Commit Mono', monospace;
  font-style: normal;
}
.callout-note { border-left-color: var(--note-border); background: var(--note-bg); }
.callout-warning { border-left-color: var(--warn-border); background: var(--warn-bg); }
.callout-tip { border-left-color: var(--tip-border); background: var(--tip-bg); }
.callout-important { border-left-color: var(--imp-border); background: var(--imp-bg); }


/* --- Syntax Highlighting Variables --- */
.chroma .k, .chroma .kd, .chroma .kn, .chroma .kp, .chroma .kr, .chroma .kt { font-weight: bold; color: var(--syntax-k); }
.chroma .c, .chroma .cm, .chroma .c1, .chroma .cs { font-style: italic; color: var(--syntax-c); }
.chroma .s, .chroma .s1, .chroma .s2 { font-style: italic; color: var(--syntax-s); }
.chroma .n, .chroma .na, .chroma .nb, .chroma .nc, .chroma .nf { color: var(--syntax-n); }
.chroma .o, .chroma .ow { font-weight: bold; color: var(--syntax-n); }
.bg { color: var(--fg); background-color: var(--bg); }
.chroma { color: var(--fg); background-color: var(--bg); }

/* Pagefind Theme Overrides */
:root {
  --pagefind-ui-primary: var(--link);
  --pagefind-ui-text: var(--fg);
  --pagefind-ui-background: var(--bg);
  --pagefind-ui-border: var(--border);
  --pagefind-ui-tag: var(--meta-bg);
  --pagefind-ui-font: 'Commit Mono', monospace;
}
.pagefind-ui .pagefind-ui__form {
  position: relative !important;
  margin: 0 !important;
}
.pagefind-ui .pagefind-ui__form::before,
.pagefind-ui .pagefind-ui__search-input::before,
.pagefind-ui .pagefind-ui__input-wrapper::before,
.pagefind-ui div[class*="search-input"]::before {
  display: none !important;
  content: none !important;
}
.pagefind-ui .pagefind-ui__form svg {
  display: none !important;
}
.pagefind-ui .pagefind-ui__search-input {
  background-color: var(--meta-bg) !important;
  color: var(--fg);
  border: none !important;
  border-radius: 0 !important;
  font-family: 'Commit Mono', monospace !important;
  font-size: 1em !important;
  font-weight: 400 !important;
  outline: none !important;
  height: 2em !important;
  padding: 0 2em 0 0.5em !important;
}
.pagefind-ui .pagefind-ui__search-clear {
  background-color: transparent !important;
  color: var(--fg) !important;
  border: none !important;
  font-size: 1.2em !important;
  width: auto !important;
  height: 100% !important;
  padding: 0 0.5em !important;
  position: absolute !important;
  right: 0 !important;
  top: 0 !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  transform: none !important;
  cursor: pointer !important;
}
.pagefind-ui .pagefind-ui__drawer {
  background: var(--bg) !important;
  border-bottom: 1px solid var(--border) !important;
  border-radius: 0 !important;
  box-shadow: 0 4px 6px rgba(0,0,0,0.1) !important;
  position: absolute !important;
  left: 0 !important;
  right: 0 !important;
  width: 100% !important;
  z-index: 1000 !important;
  padding: 0 1em !important;
  max-height: 80vh !important;
  overflow-y: auto !important;
}
.pagefind-ui .pagefind-ui__result {
  border-bottom: 1px dashed var(--border) !important;
  padding: 1em 0 !important;
}
.pagefind-ui .pagefind-ui__result-thumb {
  display: none !important;
}
.pagefind-ui .pagefind-ui__result-inner {
  margin-top: 0 !important;
}
.pagefind-ui .pagefind-ui__result-title {
  font-weight: 700 !important;
  font-family: 'Maple Mono', monospace !important;
  text-decoration: underline !important;
}
.pagefind-ui .pagefind-ui__result-link {
  color: var(--link) !important;
  text-decoration: none !important;
}
.pagefind-ui .pagefind-ui__result-excerpt {
  color: var(--fg-dim) !important;
  font-family: 'Commit Mono', monospace !important;
}
.pagefind-ui .pagefind-ui__message {
  color: var(--fg-muted) !important;
  font-family: 'Maple Mono', monospace !important;
  font-style: italic;
  padding: 1em 0 !important;
}
.pagefind-ui .pagefind-ui__button {
  background-color: transparent !important;
  border: none !important;
  color: var(--link) !important;
  font-family: 'Maple Mono', monospace !important;
  font-weight: 700 !important;
  padding: 1em 0 !important;
  width: auto !important;
  margin: 1em auto !important;
  display: block !important;
  cursor: pointer;
  text-decoration: underline !important;
}
.pagefind-ui mark {
  background-color: var(--warn-bg) !important;
  color: var(--fg) !important;
  font-weight: bold;
}